<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="net.kh.dao.ImageDao">
	<!-- <select id="memberLogin" resultType="memberVO"> SELECT no, email, pw, 
		name, phone, reg, auth FROM MEMBER WHERE email = #{email} </select> -->

	<insert id="imageInsert" parameterType="hashmap"> <!-- 하나씩들어가는거 -->   <!-- 결과값이 VO로 가는거 -->
		INSERT INTO IMAGE (
		no, room_no, filename, filesize
		)
		VALUES
		(SEQ_IMAGE_NO.NEXTVAL, #{room_no},
		#{filename},
		'0'
		)
	</insert>

	<select id="selectImageByRoomNumber" parameterType="int"
		resultType="String"> <!-- 스트링으로 받아서 리스트로 보냄 -->
		select filename from image where room_no = #{room_no}
	</select>

<!-- int후 list -->
	<select id="getRoomNumberByHostNumber" parameterType="int" resultType="String"> <!-- 호스트넘버를 가지고 방번호를 가져옴 -->
		<!-- select distinct room_no from image i, room r, host h where h.no = 
			r.host_no and r.no = i.room_no and h.no= #{h.no} -->
		select r.no from room r, host h
		where h.no=r.host_no and h.no=#{h_no}
	</select>
</mapper>
	