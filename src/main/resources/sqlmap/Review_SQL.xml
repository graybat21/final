<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="net.kh.dao.ReviewDao">
	<!-- <select id="memberLogin" resultType="memberVO"> SELECT no, email, pw, 
		name, phone, reg, auth FROM MEMBER WHERE email = #{email} </select> -->

	<insert id="writeReview" parameterType="reviewVO">
		INSERT INTO review 
			(no, writer, content, reg, star, host_no, r_no, ref)
		VALUES 
			(SEQ_REVIEW_NO.NEXTVAL, #{writer}, #{content}, sysdate, #{star}, #{host_no}, #{r_no}, 0)
	</insert>
	
	<select id="reviewList" parameterType="int" resultType="hashmap">
		SELECT 
			v.writer as membername, 
			v.content, 
			v.reg, 
			r.name as roomname, 
			v.star, 
			h.name as hostname,
			v.c_content, 
			v.c_reg
		FROM review v, host h, room r
		WHERE v.host_no = #{no}
			AND v.r_no = r.no
			AND h.no = r.host_no
		ORDER BY v.reg DESC		
	</select>	
	
	<!-- <select id="roomGetCurrentNo" resultType="int">
		SELECT
		LAST_NUMBER
		FROM
		USER_SEQUENCES
		WHERE
		SEQUENCE_NAME='SEQ_ROOM_NO'
	</select> -->
</mapper>
	